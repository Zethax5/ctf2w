/*

Created by: Zethax
Document created on: Wednesday, December 19th, 2018
Last edit made on: Thursday, December 20th, 2018
Current version: v0.1

Attributes in this plugin:
  None so far

*/

#pragma semicolon 1
#include <sourcemod>
#include <cw3-attributes>
#include <tf2>
#include <zethax>

#define PLUGIN_AUTHOR "Zethax"
#define PLUGIN_DESC "Yet another pack of attributes I've made for Crafting and his servers"
#define PLUGIN_VERSION "v0.1"
#define PLUGIN_NAME "New Attributes"

public Plugin:my_info = {
  
  name          = PLUGIN_NAME,
  author        = PLUGIN_AUTHOR,
  description   = PLUGIN_DESCRIPTION,
  version       = PLUGIN_VERSION,
  url           = ""
};

new Float:ShieldOnKill_Resist[2049];
new Float:ShieldOnKill_MaxDmg[2049];

//Controls addition of attributes from this plugin
public Action:CW3_OnAddAttribute(slot, client, const String:attrib[], const String:plugin[], const String:value[], bool:whileActive)
{
  new Action:action;
  
  if(!StrEqual(plugin, "new-attributes-zethax"))
    return Plugin_Continue;
  
  new weapon = GetPlayerWeaponSlot(client, slot);
  if(weapon > 2048 || weapon < 0)
    return Plugin_Continue;
  
  if(StrEqual(attrib, "shield on kill"))
  {
    new String:values[2][10];
    ExplodeString(value, " ", values, sizeof(values), sizeof(values[]));
    
    ShieldOnKill_Resist[weapon] = StringToFloat(values[0]);
    ShieldOnKill_MaxDmg[weapon] = StringToFloat(values[1]);
    
    action = Plugin_Handled;
  }
  
  return action; 
}

